{% extends "default/base.html" %}

{% block content %}
    <link href="{{ url_for('static',filename='styles/style.css') }}" type="text/css" rel="stylesheet">
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>
    <input type="submit" value="test" id="testbutton">
    <body>
    <div class="graph" id="graph">
        {{ graph|safe }}
    </div>
    {{ df }}
    </body>
    </html>

    <script>
        function testFunction() {
            //var testBtn = document.getElementById("testbutton");
            //testBtn.setAttribute("value", "Done");
            //var graph = document.getElementsByClassName("graph")[0];
            //console.log(graph);
            //Plotly.react(graph, {{ df }})

        }


    </script>

    <script src="{{ url_for('static', filename='javascript/jquery-3.3.1.min.js') }}"
            type="text/javascript"></script>
    <script src="{{ url_for('static', filename='javascript/jquery-ui-1.12.1/jquery-ui.js') }}"
            type="text/javascript"></script>

    <script type=text/javascript>
        $SCRIPT_ROOT = '{{ request.script_root|tojson|safe }}';
    </script>

    <script type=text/javascript>
        let data = {
            start: "1545728400",
            end: "1545757200",
            machine_id: 2
        };
        $('#testbutton').bind('click', function () {
            $.ajax({
                url: '{{ url_for('testing.update_graph') }}',
                method: "GET",
                data: {
                    start: "1545728400",
                    end: "1545757200",
                    machine_id: 2
                },
                success: function (response) {
                    $('#graph').html(response);
                },
                error: function (error) {
                    console.log(error);
                }
            });
        });
    </script>



{% endblock %}